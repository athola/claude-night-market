# {{PROJECT_NAME}} Makefile
# Generated by attune plugin

# Configuration
NPM := {{PACKAGE_MANAGER}}
NODE := node

# Colors
BOLD := \033[1m
GREEN := \033[32m
BLUE := \033[34m
RESET := \033[0m

.PHONY: help install dev build lint format typecheck test test-coverage clean

help: ## Show this help message
	@echo "$(BOLD){{PROJECT_NAME}} - Development Makefile$(RESET)"
	@echo ""
	@echo "$(BLUE)Available commands:$(RESET)"
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | \
		sort | \
		awk 'BEGIN {FS = ":.*?## "}; {printf "$(GREEN)%-20s$(RESET) %s\n", $$1, $$2}'

install: ## Install dependencies
	@echo "$(BLUE)Installing dependencies...$(RESET)"
	$(NPM) install
	@echo "$(GREEN)[OK] Dependencies installed$(RESET)"

dev: ## Start development server
	@echo "$(BLUE)Starting development server...$(RESET)"
	$(NPM) run dev

build: ## Build for production
	@echo "$(BLUE)Building for production...$(RESET)"
	$(NPM) run build
	@echo "$(GREEN)[OK] Build complete$(RESET)"

lint: ## Run ESLint
	@echo "$(BLUE)Running linting...$(RESET)"
	$(NPM) run lint

lint-fix: ## Fix linting issues
	@echo "$(BLUE)Fixing linting issues...$(RESET)"
	$(NPM) run lint:fix

format: ## Format code with Prettier
	@echo "$(BLUE)Formatting code...$(RESET)"
	$(NPM) run format

format-check: ## Check code formatting
	@echo "$(BLUE)Checking code format...$(RESET)"
	$(NPM) run format:check

typecheck: ## Run TypeScript type checking
	@echo "$(BLUE)Type checking...$(RESET)"
	$(NPM) run typecheck

test: ## Run tests
	@echo "$(BLUE)Running tests...$(RESET)"
	$(NPM) run test

test-coverage: ## Run tests with coverage
	@echo "$(BLUE)Running tests with coverage...$(RESET)"
	$(NPM) run test:coverage

clean: ## Clean build artifacts and dependencies
	@echo "$(BLUE)Cleaning...$(RESET)"
	rm -rf node_modules dist build .cache
	@echo "$(GREEN)[OK] Clean complete$(RESET)"

check-all: lint format-check typecheck test ## Run all checks

dev-setup: install ## Setup development environment
	@echo "$(GREEN)[OK] Development environment ready!$(RESET)"

ci: check-all build ## Run CI checks
	@echo "$(GREEN)[OK] All CI checks passed!$(RESET)"
